"use strict";(self.webpackChunk_justifi_webcomponents=self.webpackChunk_justifi_webcomponents||[]).push([[271],{"./dist/esm/justifi-payment-method-form.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{justifi_payment_method_form:()=>PaymentMethodForm});var _index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/esm/index-3ce5521c.js");const MessageEventType={card:{ready:"justifi.card.ready",tokenize:"justifi.card.tokenize",validate:"justifi.card.validate",resize:"justifi.card.resize",styleOverrides:"justifi.card.styleOverrides"},bankAccount:{ready:"justifi.bankAccount.ready",tokenize:"justifi.bankAccount.tokenize",validate:"justifi.bankAccount.validate",resize:"justifi.bankAccount.resize",styleOverrides:"justifi.bankAccount.styleOverrides"}},packageJson_version="0.4.0",PaymentMethodForm=class{constructor(hostRef){(0,_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef),this.paymentMethodFormReady=(0,_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"paymentMethodFormReady",7),this.paymentMethodFormTokenize=(0,_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"paymentMethodFormTokenize",7),this.paymentMethodFormType=void 0,this.paymentMethodFormValidationStrategy=void 0,this.paymentMethodStyleOverrides=void 0,this.iframeOrigin=void 0,this.height=55}connectedCallback(){window.addEventListener("message",this.dispatchMessageEvent.bind(this))}disconnectedCallback(){window.removeEventListener("message",this.dispatchMessageEvent.bind(this))}componentShouldUpdate(){this.sendStyleOverrides()}sendStyleOverrides(){this.paymentMethodStyleOverrides&&this.postMessage(MessageEventType[this.paymentMethodFormType].styleOverrides,{styleOverrides:this.paymentMethodStyleOverrides})}dispatchMessageEvent(messageEvent){const messagePayload=messageEvent.data,messageType=messagePayload.eventType,messageData=messagePayload.data;messageType===MessageEventType[this.paymentMethodFormType].ready&&this.paymentMethodFormReady.emit(messageData),messageType===MessageEventType[this.paymentMethodFormType].resize&&(this.height=messageData.height)}postMessage(eventType,payload){this.iframeElement&&this.iframeElement.contentWindow.postMessage(Object.assign({eventType},payload),"*")}async postMessageWithResponseListener(eventType,payload){return new Promise((resolve=>{const responseListener=event=>{event.data.eventType===eventType&&(window.removeEventListener("message",responseListener),resolve(event.data.data))};window.addEventListener("message",responseListener),this.postMessage(eventType,payload)}))}async tokenize(clientId,paymentMethodMetadata,account){const eventType=MessageEventType[this.paymentMethodFormType].tokenize,payload={clientId,componentVersion:packageJson_version,paymentMethodMetadata,account};return this.postMessageWithResponseListener(eventType,payload)}async validate(){return this.postMessageWithResponseListener(MessageEventType[this.paymentMethodFormType].validate)}getIframeSrc(){let iframeSrc=`${this.iframeOrigin||"https://js.justifi.ai/v2"}/${this.paymentMethodFormType}`;return this.paymentMethodFormValidationStrategy&&(iframeSrc+=`?validationStrategy=${this.paymentMethodFormValidationStrategy}`),iframeSrc}render(){return(0,_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.H,null,(0,_index_3ce5521c_js__WEBPACK_IMPORTED_MODULE_0__.h)("iframe",{id:`justifi-payment-method-form-${this.paymentMethodFormType}`,src:this.getIframeSrc(),ref:el=>this.iframeElement=el,height:this.height}))}static get watchers(){return{paymentMethodStyleOverrides:["sendStyleOverrides"]}}};PaymentMethodForm.style=":host{display:block}justifi-payment-method-form iframe{border:none;width:100%}"}}]);