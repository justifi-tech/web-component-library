import { Meta, Source } from '@storybook/addon-docs';
import dedent from 'ts-dedent';

<Meta title="Vue 3" />

# Justifi Vue 3 web components

# Index

- [Integration Step]()
- [Props and Event Handling](#props-and-event-handling)
- [Calling methods](#calling-methods)

## Integration Steps

1. Include Web Components in your Project:

Add the web components script and stylesheet to your project's `index.html` file.

<Source
  language="html"
  dark
  code={dedent(`
    <head>
      <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@justifi/webcomponents@4.6.0/dist/webcomponents/webcomponents.css" />
      <script type='module'
        src='https://cdn.jsdelivr.net/npm/@justifi/webcomponents@4.6.0/dist/webcomponents/webcomponents.esm.js'></script>
    </head>
  `)}
/>

2. Use the Web Component in your Vue Template:

Once included, use the web component tags directly in your Vue templates.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form
        :client-id="clientId"
      ></justifi-card-form>
    </template>
`)}
/>

## Props and Event Handling

- **Props:** Use Vue's binding syntax to pass props to the web components. Remember that web component attributes are typically kebab-cased.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form :client-id="clientId"></justifi-card-form>
    </template>

`)}
/>

- **Event Handling:** To listen to events, use a `ref` and the mounted lifecycle hook to add event listeners.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form ref="cardForm"></justifi-card-form>
    </template>

    <script setup>
      import { ref, onMounted } from 'vue';

      const cardForm = ref(null);

      onMounted(() => {
        cardForm.value.addEventListener('cardFormReady', (event) => {
          // Handle the card form ready event
        });
      });
    </script>

`)}
/>

## Calling Methods

To call methods on a web component from a Vue component use a `ref` to get a reference to the web component.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form ref="cardForm"></justifi-card-form>
    </template>

    <script setup>
      import { ref } from 'vue';
      const cardForm = ref(null);

      const onSomeEventHandler = () => {
        cardForm.value.tokenize(clientId, paymentMethodMetadata, subAccountID).then(tokenizeResponse => {
          // Process the response
        });
      }
    </script>

`)}
/>

In this example, `cardForm` is a reference to the `justifi-card-form` web component, and you can call its methods directly.
