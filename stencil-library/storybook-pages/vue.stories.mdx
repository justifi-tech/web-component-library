import { Meta, Source } from '@storybook/addon-docs';
import dedent from 'ts-dedent';

<Meta title="Vue 3" />

# Justifi Vue 3 web components

# Index

- [Usage](#usage)
- [Integration Step]()
- [Props and Event Handling](#usage-details)
- [Calling methods](#calling-methods)

# Usage

To integrate Justifi web components into your Vue 3 application, you will directly use the standard web components package.

## Integration Steps

1. Include Web Components in your Project:

Add the web components script and stylesheet to your project's `index.html` file.

<Source
  language="html"
  dark
  code={dedent(`
    <head>
      <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@justifi/webcomponents@4.6.0/dist/webcomponents/webcomponents.css" />
      <script type='module'
        src='https://cdn.jsdelivr.net/npm/@justifi/webcomponents@4.6.0/dist/webcomponents/webcomponents.esm.js'></script>
    </head>
  `)}
/>

2. Use the Web Component in your Vue Template:

Once included, use the web component tags directly in your Vue templates.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form
        @card-form-ready="onPaymentMethodReady"
      ></justifi-card-form>
    </template>
`)}
/>

## Props and Event Handling

- **Props:** Use Vue's binding syntax to pass props to the web components. Remember that web component attributes are typically kebab-cased.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form :client-id="clientId"></justifi-card-form>
    </template>

`)}
/>

- **Event Handling:** Listen to events using Vue's `v-on` directive or the shorthand `@`.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form
        @card-form-ready="onCardFormReady"
      ></justifi-card-form>
    </template>

`)}
/>

## Calling Methods

To call methods on a web component from a Vue component:

1. ** Reference Element:** Use Vue's `ref` to get a reference to the web component.

<Source
  language="html"
  dark
  code={dedent(`
    <template>
      <justifi-card-form ref="cardForm"></justifi-card-form>
    </template>

    <script setup>
      import { ref } from 'vue';
      const cardForm = ref(null);

      const onSomeEventHandler = () => {
        cardForm.value.tokenize(clientId, paymentMethodMetadata, subAccountID).then(tokenizeResponse => {
          // Process the response
        });
      }
    </script>

`)}
/>

In this example, `cardForm` is a reference to the `justifi-card-form` web component, and you can call its methods directly.
