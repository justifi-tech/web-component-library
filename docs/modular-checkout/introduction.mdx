---
id: introduction
title: Modular Checkout
sidebar_label: Introduction
description: Layout manager that composes payment, summary, and confirmation subcomponents into a cohesive flow.
sidebar_position: 21
---

import {
  PropsMarkdownTable,
  PartsMarkdownTable,
  getPropsFromDocs,
  getWebcomponentsVersion,
} from '../helpers';
import docsJson from '../docs.json';

## Overview

The `justifi-modular-checkout` wrapper component serves as a container for checkout-related sub components. It manages the tokenization of payment methods, billing information, insurance, and overall form submission to complete the checkout. It also supports saving a payment method to a payment method group for future use.

## Props, Events & Methods

<PropsMarkdownTable
  props={getPropsFromDocs('justifi-modular-checkout', docsJson)}
/>

### Events

- `error-event`: Emitted when validation fails, tokenization errors occur, or any other error happens during checkout processing. The event detail includes `message`, `errorCode`, and `severity`.
- `submit-event`: Fired when checkout is successfully completed. The event detail includes the `checkout` object and a success `message`.
- `checkout-changed`: Emitted whenever the checkout state changes (e.g., payment method selection, available payment methods). The event detail includes `availablePaymentMethodTypes`, `selectedPaymentMethod`, and `savedPaymentMethods`.

### Public methods

1. `submitCheckout(submitCheckoutArgs?)` – Programmatically trigger the checkout submission. Validates forms, tokenizes payment methods if needed, and completes the checkout. Optionally accepts billing form fields as arguments.
2. `validate()` – Validates all nested forms (payment method, billing, insurance) and returns a boolean indicating if validation passed. Emits `error-event` if validation fails.
3. `setSelectedPaymentMethod(paymentMethod)` – Sets the selected payment method programmatically on the checkout.

## Pre-Complete Hook

You can provide a `preCompleteHook` function to inspect the checkout state before submission proceeds. This is useful for implementing custom validation, user confirmation dialogs, or conditional payment restrictions based on business rules.

The hook runs after validation and payment method tokenization (including Plaid exchange when applicable), and before the checkout is completed, so the state includes the latest values such as `paymentToken` when available.

The hook receives three parameters:

- `state`: A `CheckoutState` object containing the current checkout information
- `resolve`: A function to call to proceed with submission
- `reject`: A function to call to stop submission

```javascript
const checkout = document.querySelector('justifi-modular-checkout');

/**
 * CheckoutState example (shape):
 * {
 *   selectedPaymentMethod: { id?: string, type: 'new_card' | 'apple_pay' | 'google_pay' | ... } | undefined,
 *   paymentAmount: 5000,
 *   totalAmount: 5000,
 *   paymentCurrency: 'USD',
 *   paymentDescription: 'Order #123',
 *   savedPaymentMethods: [],
 *   savePaymentMethod: false,
 *   bnplEnabled: false,
 *   applePayEnabled: true,
 *   insuranceEnabled: false,
 *   disableBankAccount: false,
 *   disableCreditCard: false,
 *   disablePaymentMethodGroup: false,
 *   paymentToken: 'pm_123' // tokenized payment method id; Apple Pay, Google Pay and Plaid set this too (paymentMethodId)
 * }
 */
checkout.preCompleteHook = (state, resolve, reject) => {
  // Example: Require confirmation for large payments
  if (state.totalAmount > 100000) {
    const confirmed = confirm(
      `Confirm payment of $${(state.totalAmount / 100).toFixed(2)}?`,
    );
    if (confirmed) {
      resolve(state);
    } else {
      reject();
    }
  } else {
    resolve(state);
  }
};
```

> Important: Assign the hook as a JavaScript property on the element (e.g., `checkout.preCompleteHook = fn`). Do not pass it as an HTML attribute (e.g., `pre-complete-hook="..."`); functions must be set on properties, not attributes.

See the `CheckoutState` type definition in the [Public Types](#public-types) section below for the complete structure of the state object.

## Public Types

```ts
import type { CheckoutState } from '@justifi/webcomponents';
```

---

<pre><code className="language-html">{`<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>justifi-modular-checkout</title>

<script
  type="module"
  src="https://cdn.jsdelivr.net/npm/@justifi/webcomponents@${getWebcomponentsVersion()}/dist/webcomponents/webcomponents.esm.js"
></script>

<script
  nomodule
  src="https://cdn.jsdelivr.net/npm/@justifi/webcomponents@${getWebcomponentsVersion()}/dist/webcomponents/webcomponents.js"
></script>

  <style>
      ::part(font-family) {
        font-family: georgia;   
      }
        
      ::part(color) {
        color: darkslategray;
      }

      ::part(background-color) {
        background-color: transparent;
      }
    </style>

</head>

<body>
  <justifi-modular-checkout auth-token="authToken" checkout-id="cho_1234567890">
    <justifi-checkout-summary />
    <justifi-card-form />
    <justifi-billing-form-full />
  </justifi-modular-checkout>
</body>

<script>
  (function () {
    const modularCheckout = document.querySelector('justifi-modular-checkout');

    modularCheckout.addEventListener('error-event', (event) => {
      // this event is emitted when validation fails or an error occurs during processing
      console.error('error-event', event.detail);
    });

    modularCheckout.addEventListener('submit-event', (event) => {
      // this event is emitted when checkout is successfully completed
      console.log('submit-event', event.detail);
    });

    modularCheckout.addEventListener('checkout-changed', (event) => {
      // this event is emitted when the checkout state changes
      // includes availablePaymentMethodTypes, selectedPaymentMethod, and savedPaymentMethods
      const {
        availablePaymentMethodTypes,
        selectedPaymentMethod,
        savedPaymentMethods,
      } = event.detail;
      console.log('Available payment methods:', availablePaymentMethodTypes);
      console.log('Selected payment method:', selectedPaymentMethod);
      console.log('Saved payment methods:', savedPaymentMethods);
    });
  })();
</script>

</html>`}</code></pre>
